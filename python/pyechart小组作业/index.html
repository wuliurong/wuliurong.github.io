<!DOCTYPE html>
<html lang="en">

<head>
	<meta http-equiv="content-type" content="text/html; charset=utf-8">
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	
	<!-- title -->
	
	<title>
	
		pyechart小组作业 | 
	 
	hi
	</title>
	
	<!-- keywords,description -->
	
	

	<!-- favicon -->
	
	<link rel="shortcut icon" href="/favicon.ico">
	


	<!-- search -->
	<script>
		var searchEngine = "https://www.google.com/search?q=";
		if(typeof searchEngine == "undefined" || searchEngine == null || searchEngine == ""){
			searchEngine = "https://www.google.com/search?q=";
		}
		var homeHost = "";
		if(typeof homeHost == "undefined" || homeHost == null || homeHost == ""){
			homeHost = window.location.host;
		}
	</script>


	
<link rel="stylesheet" href="/css/main.css">

	
<link rel="stylesheet" href="https://cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css">

	
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/styles/darcula.min.css">

	
<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">


	
<script src="https://cdn.jsdelivr.net/npm/jquery@3.7.0/dist/jquery.min.js"></script>

	
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

	
<script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.17.1/build/highlight.min.js"></script>

	
<script src="https://cdn.jsdelivr.net/npm/jquery-pjax@2.0.1/jquery.pjax.min.js"></script>

	
<script src="/js/main.js"></script>


	
		
<script src="https://cdn.jsdelivr.net/npm/leancloud-storage/dist/av-min.js"></script>

		
<script src="https://cdn.jsdelivr.net/npm/valine@v1.5.1/dist/Valine.min.js"></script>

	
	

<meta name="generator" content="Hexo 7.0.0"></head>

<body>
	<header id="header">
    <a id="title" href="/" class="logo">hi</a>

	<ul id="menu">
    

    

    

    
      
      
        <li class="menu-item">
          <a href='' class="menu-item-link" target="_blank">
            
          </a>
        </li>
      
    
  
    
      <li class="menu-item">
        <a href='https://github.com/wuliurong' class="menu-item-link" target="_blank">
          <i class="fa fa-github fa-2x"></i>
        </a>
      </li>
    
	</ul>
</header>

	
<div id="sidebar">
	<button id="sidebar-toggle" class="toggle" ><i class="fa fa-arrow-right " aria-hidden="true"></i></button>
	
	<div id="site-toc">
		<input id="search-input" class="search-input" type="search" placeholder="Press Enter to search">
		<div id="tree">
			

			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										Spark
									</a>
									
							<ul>
								<li class="file">
									<a href="/Spark/centos%E6%90%AD%E5%BB%BApyspark%E7%8E%AF%E5%A2%83/">
                     
										    centos搭建pyspark环境
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/Spark/rdd%E4%BD%BF%E7%94%A8/">
                     
										    rdd使用
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/Spark/rdd%E7%AC%94%E8%AE%B0/">
                     
										    rdd笔记
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/Spark/windows%E6%90%AD%E5%BB%BApyspark%E7%8E%AF%E5%A2%83/">
                     
										    windows搭建pyspark环境
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/Spark/%7F1-spark%E8%BD%AF%E4%BB%B6%E6%A0%88/">
                     
										    1-spark软件栈
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										python
									</a>
									
							<ul>
								<li class="file">
									<a href="/python/lambda/">
                     
										    lambda
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file active">
									<a href="/python/pyechart%E5%B0%8F%E7%BB%84%E4%BD%9C%E4%B8%9A/">
                     
										    pyechart小组作业
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/python/python/">
                     
										    python
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										报错
									</a>
									
							<ul>
								<li class="file">
									<a href="/%E6%8A%A5%E9%94%99/github%E5%9F%BA%E7%A1%80%E8%AF%AD%E5%8F%A5/">
                     
										    github基础语句
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/%E6%8A%A5%E9%94%99/hexo-deploy/">
                     
										    hexo-deploy
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/%E6%8A%A5%E9%94%99/hexo-typora-img/">
                     
										    hexo-typora-img
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/%E6%8A%A5%E9%94%99/vscode-install-config/">
                     
										    vscode-install-config
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
							<ul>
								<li class="directory">
									<a href="#" class="directory">
										<i class="fa fa-plus-square-o"></i>
										日记
									</a>
									
							<ul>
								<li class="file">
									<a href="/%E6%97%A5%E8%AE%B0/2024-1-13/">
                     
										    2024-1-13
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/%E6%97%A5%E8%AE%B0/2024-1-17/">
                     
										    2024-1-17
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/%E6%97%A5%E8%AE%B0/2024-1-19/">
                     
										    2024-1-19
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
							<ul>
								<li class="file">
									<a href="/%E6%97%A5%E8%AE%B0/2024-2-15/">
                     
										    2024-2-15
                     
									</a>
								</li>
								<div class="article-toc" style="display: none;"></div>
							</ul>
			
								</li>
								
							</ul>
			
		</div>
	</div>
</div>

	<!-- 引入正文 -->
	<div id="content" class="content">
		<h1 id="article-title">
	pyechart小组作业
</h1>

<!-- meta -->
<div class="article-meta">
	

	<span>lucky</span>
	<span>2024-06-09 17:15:59</span>

  <div id="article-categories">
    
		  <span>Categories：</span>
      
    

    
		    <span>Tags：</span>
        
    
  </div>

</div>

<!-- content -->
<div id="article-content">
	<p>数据可视化小组作业wlr、mq、hyl</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">#各评分段电影数量占比玫瑰图 hyl</span><br><span class="line">movie = pd.read_csv(&quot;C:/Users/01/Desktop/movie.csv&quot;, encoding=&quot;utf-8&quot;)</span><br><span class="line">movie = movie[[&quot;rate&quot;]]</span><br><span class="line">movie=movie.sort_values(by=&quot;rate&quot;)</span><br><span class="line">movie=movie.astype(&#x27;float&#x27;)</span><br><span class="line">count=[0,0,0,0,0,0,0,0,0,0]</span><br><span class="line">for i in movie.values:</span><br><span class="line">    if  i&lt;5:</span><br><span class="line">        count[0]+=1</span><br><span class="line">    elif i&lt;6:</span><br><span class="line">        count[1]+=1</span><br><span class="line">    elif i&lt;6.5:</span><br><span class="line">        count[2]+=1</span><br><span class="line">    elif i&lt;7:</span><br><span class="line">        count[3]+=1</span><br><span class="line">    elif i&lt;7.5:</span><br><span class="line">        count[4]+=1</span><br><span class="line">    elif i&lt;8:</span><br><span class="line">        count[5]+=1</span><br><span class="line">    elif i&lt;8.5:</span><br><span class="line">        count[6]+=1</span><br><span class="line">    elif i&lt;9:</span><br><span class="line">        count[7]+=1</span><br><span class="line">    elif i&lt;9.5:</span><br><span class="line">        count[8]+=1</span><br><span class="line">    elif i&lt;10:</span><br><span class="line">        count[9]+=1</span><br><span class="line">name=[&quot;[0-5)分&quot;,&quot;[5-6)分&quot;,&quot;[6-6.5)分&quot;,&quot;[6.5-7)分&quot;,&quot;[7-7.5)分&quot;,&quot;[7.5-8)分&quot;,&quot;[8,8.5)&quot;,&quot;[8.5-9)&quot;,&quot;[9-9.5)&quot;,&quot;[9.5-10]&quot;]</span><br><span class="line">movie = pd.read_csv(&quot;C:/Users/01/Desktop/movie.csv&quot;, encoding=&quot;utf-8&quot;)</span><br><span class="line">movie = movie[[&quot;rate&quot;, &quot;category&quot;]]</span><br><span class="line">movie.dropna(inplace=True)</span><br><span class="line">movie[&#x27;category&#x27;] = movie[&#x27;category&#x27;].apply(lambda x: x[:2])</span><br><span class="line">movie_mean = round(movie.groupby(&#x27;category&#x27;)[&#x27;rate&#x27;].mean(), 2)</span><br><span class="line">movie_type = list(movie_mean.index)</span><br><span class="line">movie_score = list(map(float, movie_mean.values))</span><br><span class="line">color_series = [&#x27;#FAE927&#x27;, &#x27;#E9E416&#x27;, &#x27;#C9DA36&#x27;, &#x27;#9ECB3C&#x27;, &#x27;#6DBC49&#x27;, &#x27;#37B44E&#x27;, &#x27;#3DBA78&#x27;, &#x27;#144ADCF&#x27;, &#x27;#209AC9&#x27;,</span><br><span class="line">                &#x27;#CF7B25&#x27;, &#x27;#D99D21&#x27;, &#x27;#FA8F2F&#x27;, &#x27;#F57A34&#x27;, &#x27;#D44C2D&#x27;, &#x27;#2C6BA0&#x27;, &#x27;#6A368B&#x27;, &#x27;#44388E&#x27;]</span><br><span class="line">pie1 = Pie()</span><br><span class="line">pie1.set_colors(color_series)</span><br><span class="line">pie1.add(&quot;222&quot;, [list(z) for z in zip(name, count)], radius=[&quot;15%&quot;, &quot;100%&quot;], center=[&quot;50%&quot;, &quot;50%&quot;],</span><br><span class="line">         rosetype=&quot;area&quot;)</span><br><span class="line">pie1.set_global_opts(title_opts=opts.TitleOpts(title=&#x27;各评分段电影数量占比玫瑰图&#x27;),</span><br><span class="line">                     legend_opts=opts.LegendOpts(is_show=False), toolbox_opts=opts.ToolboxOpts())</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p><img src="/../../source/images/%7Fpyechart%E5%B0%8F%E7%BB%84%E4%BD%9C%E4%B8%9A/41b0827aeb504001ba082a9bfcd4f380.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"># 21世纪各年不同类型电影数量河流图 wlr</span><br><span class="line">movie = pd.read_csv(&quot;C:/Users/01/Desktop/movie.csv&quot;, encoding=&quot;utf-8&quot;)</span><br><span class="line">movie = movie[[&quot;showtime&quot;, &quot;category&quot;]]</span><br><span class="line">movie.dropna(inplace=True)</span><br><span class="line">movie[&#x27;category&#x27;] = movie[&#x27;category&#x27;].apply(lambda x: x[:2])</span><br><span class="line">type_map = &#123;&#125;</span><br><span class="line">for tp in movie[&#x27;category&#x27;].values.tolist():</span><br><span class="line">    group = tp.split(&#x27;/&#x27;)</span><br><span class="line"></span><br><span class="line">    for t in group:</span><br><span class="line">        if not t in type_map.keys():</span><br><span class="line">            type_map[t] = 1</span><br><span class="line">y_data = []</span><br><span class="line">x_data = range(2000, max(movie[&#x27;showtime&#x27;]) + 1)</span><br><span class="line">for year in x_data:</span><br><span class="line">    for tp in type_map:</span><br><span class="line">        _data = movie[movie[&quot;showtime&quot;] == year]</span><br><span class="line">        _data = _data[_data[&quot;category&quot;].astype(str).str.contains(tp)]</span><br><span class="line">        value = [str(year), len(_data), tp]</span><br><span class="line">        y_data.append(value)</span><br><span class="line">name = []</span><br><span class="line">for i, j in type_map.items():</span><br><span class="line">    name.append(i)</span><br><span class="line">river = ThemeRiver()</span><br><span class="line">river.add(</span><br><span class="line">    series_name=name,</span><br><span class="line">    data=y_data,</span><br><span class="line">    singleaxis_opts=opts.SingleAxisOpts(</span><br><span class="line">        pos_top=&quot;50&quot;, pos_bottom=&quot;50&quot;, type_=&quot;time&quot;</span><br><span class="line">    ),</span><br><span class="line">)</span><br><span class="line">river.set_global_opts(</span><br><span class="line">    tooltip_opts=opts.TooltipOpts(trigger=&quot;axis&quot;, axis_pointer_type=&quot;line&quot;),</span><br><span class="line">    title_opts=opts.TitleOpts(title=&quot;21世纪各年不同类型电影数量河流图&quot;, subtitle=&quot;2000--2023&quot;, pos_bottom=&quot;70%&quot;, pos_right=&quot;50%&quot;),</span><br><span class="line">)</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p><img src="/../../source/images/%7Fpyechart%E5%B0%8F%E7%BB%84%E4%BD%9C%E4%B8%9A/b9e3ed40fb6e4c8cad455914a8843933.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 世界语言电影数量排名前七漏斗图 wlr</span><br><span class="line">movie = pd.read_csv(&quot;C:/Users/01/Desktop/movie.csv&quot;, encoding=&quot;utf-8&quot;)</span><br><span class="line">movie = movie[[&quot;language&quot;]]</span><br><span class="line">movie.dropna(inplace=True)</span><br><span class="line">movie[&#x27;language&#x27;] = movie[&#x27;language&#x27;].apply(lambda x: x[:2])</span><br><span class="line">lang = movie[&#x27;language&#x27;].value_counts()[:7]</span><br><span class="line">lang = pd.DataFrame(lang)</span><br><span class="line">a = lang.index</span><br><span class="line">b = lang[&#x27;language&#x27;]</span><br><span class="line"></span><br><span class="line">c = (</span><br><span class="line">    Funnel()</span><br><span class="line">        .add(&quot;类目&quot;, [list(z) for z in zip(a, b)])</span><br><span class="line">)</span><br><span class="line">c.set_global_opts(title_opts=opts.TitleOpts(title=&quot;世界语言电影数量排名前七漏斗图&quot;),</span><br><span class="line">                  legend_opts=opts.LegendOpts(orient=&quot;vertical&quot;, pos_top=&quot;20%&quot;, pos_left=&quot;10%&quot;))</span><br><span class="line">c.set_series_opts(label_opts=opts.LabelOpts(is_show=True))</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p> <img src="/../../source/images/%7Fpyechart%E5%B0%8F%E7%BB%84%E4%BD%9C%E4%B8%9A/72dd5a15715e4052a6e52a5794157e66.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">#21世纪不同类型电影平均分直方图 wlr</span><br><span class="line">movie = pd.read_csv(&quot;C:/Users/01/Desktop/movie.csv&quot;, encoding=&quot;utf-8&quot;)</span><br><span class="line">movie = movie[[&quot;rate&quot;, &quot;category&quot;]]</span><br><span class="line">movie.dropna(inplace=True)</span><br><span class="line">movie[&#x27;category&#x27;] = movie[&#x27;category&#x27;].apply(lambda x: x[:2])</span><br><span class="line">movie_mean = round(movie.groupby(&#x27;category&#x27;)[&#x27;rate&#x27;].mean(), 2)</span><br><span class="line">movie_type = list(movie_mean.index)</span><br><span class="line">movie_score = list(map(float, movie_mean.values))</span><br><span class="line">bar = Bar()</span><br><span class="line">bar.add_xaxis(movie_type)</span><br><span class="line">bar.add_yaxis(&#x27;21世纪不同类型电影平均分直方图&#x27;,movie_score)</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p><img src="/../../source/images/%7Fpyechart%E5%B0%8F%E7%BB%84%E4%BD%9C%E4%B8%9A/fa0366e64e1144418f38987ac1a96d3c.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"># 刘德华作品类型统计饼图 mq</span><br><span class="line">df = pd.read_csv(&quot;C:/Users/01/Desktop/movie.csv&quot;, encoding=&quot;utf-8&quot;)</span><br><span class="line">data = df[df[&#x27;actor&#x27;].astype(str).str.contains(&#x27;刘德华&#x27;)]</span><br><span class="line">type_map = &#123;&#125;</span><br><span class="line"></span><br><span class="line">for tp in data[&#x27;category&#x27;].values.tolist():</span><br><span class="line">    group = tp.split(&#x27;/&#x27;)</span><br><span class="line">    for t in group:</span><br><span class="line">        if not t in type_map.keys():</span><br><span class="line">            type_map[t] = 1</span><br><span class="line">        if t in type_map.keys():</span><br><span class="line">            type_map[t] += 1</span><br><span class="line"></span><br><span class="line">pie = Pie()</span><br><span class="line">pie.add(&#x27;刘德华作品类型&#x27;, list(zip(type_map.keys(), type_map.values())))</span><br><span class="line">pie.set_series_opts(label_opts=opts.LabelOpts(formatter=&quot;&#123;b&#125;: &#123;d&#125;%&quot;))</span><br><span class="line">pie.set_global_opts(title_opts=opts.TitleOpts(title=&#x27;刘德华作品类型占比饼图&#x27;),legend_opts=opts.LegendOpts(orient=&quot;vertical&quot;, pos_top=&quot;20%&quot;, pos_left=&quot;5%&quot;))</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p> <img src="/../../source/images/%7Fpyechart%E5%B0%8F%E7%BB%84%E4%BD%9C%E4%B8%9A/7bc2d1bb799a4b5e8c854e063b2526e8.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">#每年刘德华演过的电影平均分折线图 mq</span><br><span class="line">data = pd.read_csv(&quot;C:/Users/01/Desktop/movie.csv&quot;, encoding=&quot;utf-8&quot;)</span><br><span class="line">data = data[data[&#x27;actor&#x27;].astype(str).str.contains(&#x27;刘德华&#x27;)]</span><br><span class="line">rateall=pd.DataFrame(data,columns=[&#x27;showtime&#x27;,&#x27;rate&#x27;])</span><br><span class="line">rateall=rateall.sort_values(by=&#x27;showtime&#x27;,ascending=True)</span><br><span class="line">avg = rateall.groupby(&#x27;showtime&#x27;).mean()</span><br><span class="line">avg = avg[&#x27;rate&#x27;]</span><br><span class="line">year_list = [str(i) for i in (1988, 1989, 1990, 1991, 1994, 1997, 1999)]</span><br><span class="line">timeline_year_list = [str(i) for i in</span><br><span class="line">                      (2000, 2001, 2002, 2003, 2004, 2005, 2007, 2008, 2009, 2010, 2011, 2012, 2013, 2014, 2015)]</span><br><span class="line"># 创建时间轴对象</span><br><span class="line">timeline = Timeline()</span><br><span class="line">for i in range(len(timeline_year_list)):</span><br><span class="line">    # 创建一个折线图对象</span><br><span class="line">    line_chart = Line()</span><br><span class="line">    x_data = year_list + timeline_year_list[:i + 1] if i &gt; 0 else year_list</span><br><span class="line"></span><br><span class="line">    line_chart.add_xaxis(x_data)</span><br><span class="line">    line_chart.add_yaxis(&#x27;rate&#x27;, avg)</span><br><span class="line">    # 设置标题和坐标轴标签</span><br><span class="line">    line_chart.set_global_opts(title_opts=opts.TitleOpts(title=&quot;刘德华（&#123;&#125;)年电影平均分&quot;.format(timeline_year_list[i])),</span><br><span class="line">                               xaxis_opts=opts.AxisOpts(name=&quot;年份&quot;),</span><br><span class="line">                               yaxis_opts=opts.AxisOpts(name=&quot;rate&quot;))</span><br><span class="line">    line_chart.set_series_opts(</span><br><span class="line">        label_opts=opts.LabelOpts(is_show=True),  # 隐藏数值</span><br><span class="line">        markpoint_opts=opts.MarkPointOpts(</span><br><span class="line">            data=[</span><br><span class="line">                opts.MarkPointItem(type_=&quot;max&quot;, name=&quot;最大值&quot;)</span><br><span class="line">            ]</span><br><span class="line">        )</span><br><span class="line">    )</span><br><span class="line">    # 添加当前折线图到时间轴</span><br><span class="line">    timeline.add(line_chart, &quot;&#123;&#125;年&quot;.format(timeline_year_list[i]))</span><br><span class="line">    timeline.add_schema(</span><br><span class="line">        play_interval=1000,  # 设置自动播放的间隔时间，单位为毫秒</span><br><span class="line">        is_auto_play=True,  # 设置是否自动播放，默认为 True</span><br><span class="line">        is_loop_play=True,  # 设置时间轴是否循环播放，默认为 False</span><br><span class="line">        is_timeline_show=True</span><br><span class="line">    )</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p> <img src="/../../source/images/%7Fpyechart%E5%B0%8F%E7%BB%84%E4%BD%9C%E4%B8%9A/397471088d6a431dbcaca659786ab335.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">#各国电影评分超过9分的电影部数世界地图 hyl</span><br><span class="line">movie = pd.read_csv(&#x27;C:/Users/01/Desktop/movie.csv&#x27;, encoding=&#x27;utf-8&#x27;)</span><br><span class="line">movie = movie[[&quot;rate&quot;, &quot;district&quot;]]</span><br><span class="line">movie = movie[movie[&#x27;rate&#x27;] &gt;= 9.0]</span><br><span class="line">data_ra = movie[[&quot;rate&quot;]]</span><br><span class="line">data_ra = data_ra[data_ra[&#x27;rate&#x27;] &gt;= 9.0]</span><br><span class="line">movie[&#x27;district&#x27;] = movie[&#x27;district&#x27;].apply(lambda x: x.split(&#x27;_&#x27;)[0])</span><br><span class="line">movie[&#x27;district&#x27;] = movie[&#x27;district&#x27;].replace(&#x27;United States of America&#x27;, &#x27;United States&#x27;)</span><br><span class="line">data_di = list(movie[&quot;district&quot;])</span><br><span class="line">di_map = &#123;&#125;</span><br><span class="line">for t in data_di:</span><br><span class="line">    if t in di_map.keys():</span><br><span class="line">        di_map[t] += 1</span><br><span class="line"></span><br><span class="line">    else:</span><br><span class="line">        di_map[t] = 1</span><br><span class="line"></span><br><span class="line">s = list(di_map.keys())</span><br><span class="line">v = list(di_map.values())</span><br><span class="line">map = (</span><br><span class="line">    Map()</span><br><span class="line">        .add(&#x27;各国电影评分超过9分的电影部数&#x27;, list(zip(s, v)), &quot;world&quot;)</span><br><span class="line">        .set_series_opts(label_opts=opts.LabelOpts(is_show=False))</span><br><span class="line">        .set_global_opts(title_opts=opts.TitleOpts(title=&quot;Map-世界地图&quot;), visualmap_opts=opts.VisualMapOpts(max_=30)</span><br><span class="line">                         ))</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p> <img src="/../../source/images/%7Fpyechart%E5%B0%8F%E7%BB%84%E4%BD%9C%E4%B8%9A/011d3e275f9847e28901978277a8881e.png" alt="img"><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动">编辑</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask,render_template,Markup</span><br><span class="line"><span class="keyword">from</span> jinja2 <span class="keyword">import</span> Environment, FileSystemLoader</span><br><span class="line"><span class="keyword">from</span> pyecharts.<span class="built_in">globals</span> <span class="keyword">import</span> CurrentConfig</span><br><span class="line"><span class="keyword">import</span> json,re,os</span><br><span class="line"><span class="keyword">from</span> pyecharts <span class="keyword">import</span> types</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Bar, Line, Pie, Map, Page, Timeline</span><br><span class="line"><span class="keyword">from</span> pyecharts.faker <span class="keyword">import</span> Faker</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> flask <span class="keyword">import</span> Flask, json</span><br><span class="line"><span class="keyword">from</span> jinja2 <span class="keyword">import</span> Environment, FileSystemLoader</span><br><span class="line"><span class="keyword">from</span> markupsafe <span class="keyword">import</span> Markup</span><br><span class="line"><span class="keyword">from</span> mpmath.function_docs <span class="keyword">import</span> re</span><br><span class="line"><span class="keyword">from</span> pyecharts.<span class="built_in">globals</span> <span class="keyword">import</span> CurrentConfig</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Pie, Page</span><br><span class="line"><span class="keyword">from</span> pyecharts <span class="keyword">import</span> options <span class="keyword">as</span> opts, types</span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> ThemeRiver</span><br><span class="line"><span class="keyword">import</span> pandas <span class="keyword">as</span> pd</span><br><span class="line"><span class="keyword">from</span> pyecharts.charts <span class="keyword">import</span> Funnel</span><br><span class="line"></span><br><span class="line"><span class="comment"># 将模板位置指定为本项目的templates文件夹</span></span><br><span class="line">CurrentConfig.GLOBAL_ENV = Environment(loader=FileSystemLoader(<span class="string">&quot;./templates&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">#图代码</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#page</span></span><br><span class="line"><span class="comment">#参数layout=Page.DraggablePageLayout表示可拖动布局</span></span><br><span class="line">page = Page(layout=Page.DraggablePageLayout)</span><br><span class="line">page.add(timeline,<span class="built_in">map</span>,pie1,bar,river,c,pie)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app = Flask(__name__)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">save_resize_html</span>(<span class="params"></span></span><br><span class="line"><span class="params">        source: <span class="built_in">str</span> = <span class="string">&quot;render.html&quot;</span>,</span></span><br><span class="line"><span class="params">        cfg_file: types.<span class="type">Optional</span>[<span class="built_in">str</span>] = <span class="literal">None</span></span></span><br><span class="line"><span class="params">    </span>) -&gt; <span class="built_in">str</span>:</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(source, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            html = f.read()</span><br><span class="line"></span><br><span class="line">        charts = []</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> cfg_file:</span><br><span class="line">            <span class="keyword">with</span> <span class="built_in">open</span>(cfg_file, <span class="string">&quot;r&quot;</span>, encoding=<span class="string">&quot;utf8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">                charts = json.load(f)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> chart <span class="keyword">in</span> charts:</span><br><span class="line">            s = (</span><br><span class="line">                <span class="string">&#x27;&lt;div id=&quot;&#123;cid&#125;&quot; class=&quot;chart-container&quot; style=&quot;position: absolute; &#x27;</span></span><br><span class="line">                <span class="string">&#x27;width: &#123;width&#125;; height: &#123;height&#125;; top: &#123;top&#125;; left: &#123;left&#125;;&quot;&gt;&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">                    cid=chart[<span class="string">&quot;cid&quot;</span>],</span><br><span class="line">                    width=chart[<span class="string">&quot;width&quot;</span>],</span><br><span class="line">                    height=chart[<span class="string">&quot;height&quot;</span>],</span><br><span class="line">                    top=chart[<span class="string">&quot;top&quot;</span>],</span><br><span class="line">                    left=chart[<span class="string">&quot;left&quot;</span>],</span><br><span class="line">                )</span><br><span class="line">            )</span><br><span class="line">            html = re.sub(</span><br><span class="line">                <span class="string">&#x27;&lt;div id=&quot;&#123;&#125;&quot; class=&quot;chart-container&quot; style=&quot;(.*?)&quot;&gt;&#x27;</span>.<span class="built_in">format</span>(</span><br><span class="line">                    chart[<span class="string">&quot;cid&quot;</span>]</span><br><span class="line">                ),</span><br><span class="line">                s,</span><br><span class="line">                html,</span><br><span class="line">            )</span><br><span class="line">            html = re.sub(<span class="string">&quot;&#x27;border-width&#x27;, &#x27;1px&#x27;&quot;</span>, <span class="string">&quot;&#x27;border-width&#x27;, &#x27;0px&#x27;&quot;</span>, html)</span><br><span class="line">            html = re.sub(</span><br><span class="line">                <span class="string">r&#x27;&lt;button onclick=&quot;downloadCfg\(\)&quot;&gt;Save Config&lt;/button&gt;&#x27;</span>, <span class="string">&quot;&quot;</span>, html</span><br><span class="line">            )</span><br><span class="line">            html = re.sub(<span class="string">r&quot;.resizable\(\).draggable\(\)&quot;</span>, <span class="string">&quot;&quot;</span>, html)</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> html</span><br><span class="line"></span><br><span class="line"><span class="meta">@app.route(<span class="params"><span class="string">&#x27;/&#x27;</span></span>)</span></span><br><span class="line"><span class="keyword">def</span> <span class="title function_">index</span>():</span><br><span class="line">    <span class="keyword">if</span> os.path.exists(<span class="string">&quot;C:/Users/01/PycharmProjects/myflask_demo/chart_config.json&quot;</span>):</span><br><span class="line">        new_html = save_resize_html(<span class="string">&#x27;templates/render.html&#x27;</span>, <span class="string">&quot;C:/Users/01/PycharmProjects/myflask_demo/chart_config.json&quot;</span>)</span><br><span class="line">        <span class="keyword">return</span> Markup(new_html)</span><br><span class="line">    <span class="keyword">else</span>:</span><br><span class="line">        old_html = page.render_embed(<span class="string">&#x27;my_simple_page.html&#x27;</span>)</span><br><span class="line">        <span class="keyword">with</span> <span class="built_in">open</span>(<span class="string">&#x27;templates/render.html&#x27;</span>, <span class="string">&quot;w&quot;</span>, encoding=<span class="string">&quot;utf8&quot;</span>) <span class="keyword">as</span> f:</span><br><span class="line">            f.write(old_html)</span><br><span class="line">        <span class="keyword">return</span> Markup(old_html)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> __name__ == <span class="string">&#x27;__main__&#x27;</span>:</span><br><span class="line">    app.run()</span><br></pre></td></tr></table></figure>

<p><img src="data:image/gif;base64,R0lGODlhAQABAPABAP///wAAACH5BAEKAAAALAAAAAABAAEAAAICRAEAOw==" alt="点击并拖拽以移动"></p>
<p><strong>wlr、mq、hyl的小组作业</strong> </p>
<p><img src="/../../source/images/%7Fpyechart%E5%B0%8F%E7%BB%84%E4%BD%9C%E4%B8%9A/946524700fd84af6860f0c8120b18507.png" alt="img"></p>

</div>

<!-- post-guide -->

    <div class="post-guide">
        <div class="item left">
            
              <a href="/Spark/rdd%E4%BD%BF%E7%94%A8/">
                  <i class="fa fa-angle-left" aria-hidden="true"></i>
                  rdd使用
              </a>
            
        </div>
        <div class="item right">
            
              <a href="/python/lambda/">
			  
			
				  <!-- 在这里访问 page.next.slug -->
				  python/lambda
				
				<i class="fa fa-angle-right" aria-hidden="true"></i>
              </a>
            
        </div>
    </div>


<!-- comment - giscus -->


<!-- comment - valine -->


<script>
	
	
</script>






	</div>
	<div id="footer">
	<p>
	©<span id="footerYear-start"></span>-<span id="footerYear-end"></span>

	
	    <a href="/">lucky</a>
	
	
	
	<br>
	Email:wuliurong2021nnnu@163.com
	</p>
</div>


<script type="text/javascript">
	document.getElementById('footerYear-start').innerHTML = new Date().getFullYear() + '';
</script>

<script type="text/javascript">
	document.getElementById('footerYear-end').innerHTML = new Date().getFullYear() + '';
</script>

	<button id="totop-toggle" class="toggle"><i class="fa fa-angle-double-up" aria-hidden="true"></i></button>
</body>
</html>